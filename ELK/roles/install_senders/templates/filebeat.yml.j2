###################### Filebeat Configuration Example #########################

# @@@@@@@@@@@@@@@@@@@@ THIS FILE UNDER ANSIBLE CONTROL

#=========================== Filebeat inputs =============================

filebeat.prospectors:
- type: log
  paths:
    - /var/log/*.log
  document_type: syslog
  registry: /var/lib/filebeat/registry

#============================= Filebeat modules ===============================

filebeat.config.modules:
  path: ${path.config}/modules.d/*.yml
  reload.enabled: false

#==================== Elasticsearch template setting ==========================

setup.template.settings:
  index.number_of_shards: 3

#============================== Kibana =====================================
{% for host in groups.kibana %}
setup.kibana:
  host: "{{ host }}:{{ kibana_port }}"
{% endfor %}
#-------------------------- Elasticsearch output ------------------------------
#{% for host in groups.elastic_instances %}
#output.elasticsearch:
#  hosts: ["{{ host }}:9200"]
#{% endfor %}
#----------------------------- Logstash output --------------------------------
{% for host in groups.logstash %}
output.logstash:
  hosts: ["{{ host }}:5044"]
{% endfor %}
#================================ Processors =====================================
# Configure processors to enhance or manipulate events generated by the beat.

processors:
  - add_host_metadata: ~
  - add_cloud_metadata: ~
